<% if @kernel == "Linux" -%>sinclude(`/usr/share/sendmail-cf/m4/cf.m4')
<% end -%>divert(0)
VERSIONID(`puppet')
<% if @kernel == "FreeBSD" -%><% version = "freebsd6" -%><% elsif @kernel == "OpenBSD" -%><% version = "openbsd" -%><% elsif @kernel == "Linux" -%><% version = "linux" -%><% end -%>OSTYPE(<%=version%>)
define(`__OSTYPE__', `')
define(`confDOMAIN_NAME', `<%=@domain%>')
define(`confMIME_FORMAT_ERRORS', `False')
define(`confSMTP_LOGIN_MSG', `<%=@fqdn%> ESMTP')
define(`confTO_IDENT', `0s')
define(`confLOCAL_SHELL_PATH', `/bin/false')
<% if 0 == 1 -%>define(`confPRIVACY_FLAGS', ``noexpn,novrfy,noverb,noretrn'')
<% else -%>define(`confPRIVACY_FLAGS', ``noexpn,novrfy,noverb'')
<% end -%>define(`confDONT_INIT_GROUPS', `True')
define(`confTIME_ZONE', `USE_TZ')
define(`STATUS_FILE', `/var/spool/in.st')
MASQUERADE_AS(`unetresgrossebite.com')
FEATURE(`allmasquerade')
FEATURE(`always_add_domain')
FEATURE(`masquerade_envelope')
<% if @mail_ip != false -%>define(`confMAIL_HUB', `<% @mail_ip.each do |host| -%><%=host%><% break -%><% end -%>')
<% end -%>FEATURE(`use_cw_file')
DAEMON_OPTIONS(`Port=smtp,Addr=<% if @srvtype == "mail" -%><%=@ipaddress%><% else %>127.0.0.1<% end -%>,Name=MTA')
MAILER(`smtp')
