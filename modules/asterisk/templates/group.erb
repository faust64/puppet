[ext-group-<%=@name%>]
exten => <%=@name%>,1,Macro(user-callerid,)
exten => <%=@name%>,n,GotoIf($["foo${BLKVM_OVERRIDE}" = "foo"]?skipdb)
exten => <%=@name%>,n,GotoIf($["${DB(${BLKVM_OVERRIDE})}" = "TRUE"]?skipov)
exten => <%=@name%>,n(skipdb),Set(__NODEST=)
exten => <%=@name%>,n,Set(__BLKVM_OVERRIDE=BLKVM/${EXTEN}/${CHANNEL})
exten => <%=@name%>,n,Set(__BLKVM_BASE=${EXTEN})
exten => <%=@name%>,n,Set(DB(${BLKVM_OVERRIDE})=TRUE)
exten => <%=@name%>,n(skipov),Set(RRNODEST=${NODEST})
exten => <%=@name%>,n(skipvmblk),Set(__NODEST=${EXTEN})
exten => <%=@name%>,n,GosubIf($[${DB_EXISTS(RINGGROUP/<%=@name%>/changecid)} = 1 & "${DB(RINGGROUP/<%=@name%>/changecid)}" != "default" & "${DB(RINGGROUP/<%=@name%>/changecid)}" != ""]?sub-rgsetcid,s,1)
exten => <%=@name%>,n,Set(RecordMethod=Group)
<% if @members -%>exten => <%=@name%>,n,Macro(record-enable,<%=@members.join('-')%>,${RecordMethod})
exten => <%=@name%>,n,Set(RingGroupMethod=<%=@strategy%>)
exten => <%=@name%>,n(DIALGRP),Macro(dial,<%=@ringtime%>,${DIAL_OPTIONS},<%=@members.join('-')%>)
<% end -%>exten => <%=@name%>,n,Set(RingGroupMethod=)
exten => <%=@name%>,n,GotoIf($["foo${RRNODEST}" != "foo"]?nodest)
exten => <%=@name%>,n,Set(__NODEST=)
exten => <%=@name%>,n,Noop(Deleting: ${BLKVM_OVERRIDE} ${DB_DELETE(${BLKVM_OVERRIDE})})
exten => <%=@name%>,n,Goto(<%=@fallback%>,1)
exten => <%=@name%>,n(nodest),Noop(SKIPPING DEST, CALL CAME FROM Q/RG: ${RRNODEST})
