additional_classes:
  - Haproxy

haproxy_ssl_bind_ciphers:
  - ECDH+AESGCM
  - DH+AESGCM
  - ECDH+AES256
  - DH+AES256
  - ECDH+AES128
  - DH+AES
  - RSA+AESGCM
  - RSA+AES
  - "!aNULL"
  - "!MD5"
  - "!DSS"
haproxy_ssl_bind_options:
  - no-sslv3
  - no-tlsv10
haproxy_backends:
  - name: update
    check_fall: 3
    check_hostname: update.stress.peerio.com
    check_interval: 10s
    check_rise: 3
    check_uri: /ping
    port: 443
    targets:
    type: worker
    targets:
      - { name: worker, host: 10.255.125.60 }
    virtual: true
  - name: ws
    check_fall: 3
    check_hostname: ws.stress.peerio.com
    check_interval: 10s
    check_rise: 3
    check_uri: /ping
    port: 443
    targets:
    type: worker
    targets:
      - { name: worker, host: 10.255.125.60 }

haproxy_sni_rules:
  - backend: update
    rules:
      - name: main
        match: hdr_beg(host)
        pattern: update
  - backend: ws
    rules:
      - name: alias
        match: hdr_beg(host)
        pattern: dr
      - name: main
        match: hdr_beg(host)
        pattern: ws
